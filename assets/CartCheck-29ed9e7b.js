import{_ as E,a as T,m as N,r as u,o as r,c as i,d,w as h,b as e,F as P,p as A,t as n,H as p,I as L,K as F,l as B,f as g,n as y}from"./index-97dc42a3.js";import{S as v}from"./sweetalert2.all-4fbfe73e.js";import{c as x}from"./cartStore-92ea952b.js";import"./vueLoadingStore-a0b8f305.js";const{VITE_APP_URL:D,VITE_APP_PATH:R}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"zxcv123",BASE_URL:"/Vue3_Barbecue/",MODE:"production",DEV:!1,PROD:!0},C={data(){return{data:{user:{email:"",name:"",tel:"",address:""},message:""},submitLoading:!1}},methods:{...T(x,["getCarts"]),onSubmit(){this.submitLoading=!0;const{data:a}=this;this.$http.post(`${D}v2/api/${R}/order`,{data:a}).then(t=>{this.submitLoading=!1,v.fire({title:t.data.message,icon:"success",color:"white",confirmButtonText:"OK回首頁",background:"url(https://storage.googleapis.com/vue-course-api.appspot.com/zxcv123/1677768481152.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=msNPlyzL22mB0%2B11FdYXDfM5%2BtPzJKNOfRcAX2x6VUQwRgVMsNNolDvLdy34K5rzGpA%2FO0PH4g0Nw0KLQCZ%2FBZGtN1kscofbr%2F8rmel9eEuLAFBahiyGHwR02EJ7Cf8qGdZoHsjYzaR5PedfF13koGt4ptiDgg3XkrIrdXGUOHl9WRD3bb3nepb%2BkNauu9X8mG6O%2FgCYZ8ZCZJiAmRghrqGRGMfmToq68eu5DnvuRUayLVSlzIT75l3AWi8IphAK34R35PoW6ZsYlQiMsebbLEDu6M9YYI6mkcSu%2FE8yDATlX7xN5ooJZkQlCgrmOH0XOheN5y%2FnghjgOJBkxo7v7w%3D%3D)"}).then(b=>{b.isConfirmed&&this.$router.push("/")}),this.$refs.form.resetForm(),this.data.message="",this.getCarts()}).catch(t=>{v.fire({title:t.response.data.message,icon:"error",confirmButtonText:"OK"})})}},computed:{...N(x,["cart"])},mounted(){}},S={class:"my-5 row justify-content-center"},O={class:"mb-3"},U=e("label",{for:"email",class:"form-label"},"Email",-1),z={class:"mb-3"},G=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),I={class:"mb-3"},M=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),j={class:"mb-3"},q=e("label",{for:"address",class:"form-label"},"收件人地址",-1),H={class:"mb-3"},Z=e("label",{for:"message",class:"form-label"},"留言",-1),K={class:"text-end"},X=["disabled"],Y={key:0,class:"spinner-border spinner-border-sm",role:"status"},J={class:"col-md-4"},Q={class:"border border-primary p-4 mb-4 bg-primary bg-opacity-50 shadow"},W=e("h4",{class:"mb-4"},"Order Detail",-1),$=["src","alt"],ee={class:"w-100 ms-2"},se={class:"d-flex justify-content-between fw-bold"},te={class:"mb-0"},oe={class:"mb-0"},ae={class:"d-flex justify-content-between"},le={key:0,class:"text-muted mb-0"},re={key:1},de={class:"mb-0"},ie={class:"table mt-4 border-top border-bottom text-muted"},ne=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"Subtotal",-1),ce={key:0,class:"text-end border-0 px-0 pt-4"},me={key:1,class:"text-end border-0 px-0 pt-4"},ue=e("tr",null,[e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"Payment"),e("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),pe={class:"d-flex justify-content-between mt-4"},be=e("p",{class:"mb-0 h4 fw-bold"},"Total",-1),_e={class:"mb-0 h4 fw-bold"};function fe(a,t,b,he,o,V){const c=u("VueField"),m=u("ErrorMessage"),k=u("RouterLink"),w=u("VueForm");return r(),i("div",S,[d(w,{ref:"form",class:"col-md-6 p-4 bg-primary bg-opacity-50 border border-primary",onSubmit:V.onSubmit},{default:h(({errors:s})=>{var _,f;return[e("div",O,[U,d(c,{id:"email",name:"Email",type:"email",class:p(["form-control",{"is-invalid":s.Email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:o.data.user.email,"onUpdate:modelValue":t[0]||(t[0]=l=>o.data.user.email=l)},null,8,["class","modelValue"]),d(m,{name:"Email",class:"invalid-feedback"})]),e("div",z,[G,d(c,{id:"name",name:"姓名",type:"text",class:p(["form-control",{"is-invalid":s.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.data.user.name,"onUpdate:modelValue":t[1]||(t[1]=l=>o.data.user.name=l)},null,8,["class","modelValue"]),d(m,{name:"姓名",class:"invalid-feedback"})]),e("div",I,[M,d(c,{id:"tel",name:"電話",type:"text",class:p(["form-control",{"is-invalid":s.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:o.data.user.tel,"onUpdate:modelValue":t[2]||(t[2]=l=>o.data.user.tel=l)},null,8,["class","modelValue"]),d(m,{name:"電話",class:"invalid-feedback"})]),e("div",j,[q,d(c,{id:"address",name:"地址",type:"text",class:p(["form-control",{"is-invalid":s.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:o.data.user.address,"onUpdate:modelValue":t[3]||(t[3]=l=>o.data.user.address=l)},null,8,["class","modelValue"]),d(m,{name:"地址",class:"invalid-feedback"})]),e("div",H,[Z,L(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=l=>o.data.message=l)},null,512),[[F,o.data.message]])]),e("div",K,[(f=(_=a.cart)==null?void 0:_.carts)!=null&&f.length?(r(),B(k,{key:0,to:"/cart",class:"btn btn-outline-primary float-start"},{default:h(()=>[g("回上一步")]),_:1})):y("",!0),e("button",{type:"submit",class:"btn btn-danger",disabled:o.submitLoading},[o.submitLoading?(r(),i("span",Y)):y("",!0),g(" 送出訂單 ")],8,X)])]}),_:1},8,["onSubmit"]),e("div",J,[e("div",Q,[W,(r(!0),i(P,null,A(a.cart.carts,s=>(r(),i("div",{key:s.id,class:"d-flex mt-2"},[e("img",{src:s.product.imageUrl,alt:s.product.title,class:"",style:{width:"160px",height:"50px","object-fit":"cover"}},null,8,$),e("div",ee,[e("div",se,[e("p",te,n(s.product.title),1),e("p",oe,n(s.qty),1)]),e("div",ae,[s.total!==s.final_total?(r(),i("del",le,[e("small",null,"NT$"+n(s.total),1)])):(r(),i("small",re,"NT$"+n(s.product.price),1)),e("p",de,"NT$"+n(s.final_total),1)])])]))),128)),e("table",ie,[e("tbody",null,[e("tr",null,[ne,a.cart.total==a.cart.final_total?(r(),i("td",ce,[e("span",null," NT$"+n(a.cart.total),1)])):(r(),i("td",me,[e("del",null," NT$"+n(a.cart.total),1)]))]),ue])]),e("div",pe,[be,e("p",_e,"NT$"+n(a.cart.final_total),1)])])])])}const Ve=E(C,[["render",fe]]);export{Ve as default};
