import{_ as T,a as N,m as P,r as p,o as r,c as n,b as e,d,w as g,F as A,p as L,t as c,H as _,I as S,K as C,l as D,f as v,n as y,q as F,s as R}from"./index-015ac3df.js";import{S as x}from"./sweetalert2.all-d0eccc8d.js";import{c as V}from"./cartStore-f78deeb3.js";import"./vueLoadingStore-82149884.js";const{VITE_APP_URL:B,VITE_APP_PATH:I}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"zxcv123",BASE_URL:"/Vue3_Barbecue/",MODE:"production",DEV:!1,PROD:!0},O={data(){return{data:{user:{email:"",name:"",tel:"",address:""},message:""},submitLoading:!1}},methods:{...N(V,["getCarts"]),onSubmit(){this.submitLoading=!0;const{data:o}=this;this.$http.post(`${B}v2/api/${I}/order`,{data:o}).then(t=>{this.submitLoading=!1,x.fire({title:t.data.message,icon:"success",color:"white",confirmButtonText:"OK回首頁",background:"url(https://storage.googleapis.com/vue-course-api.appspot.com/zxcv123/1677768481152.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=msNPlyzL22mB0%2B11FdYXDfM5%2BtPzJKNOfRcAX2x6VUQwRgVMsNNolDvLdy34K5rzGpA%2FO0PH4g0Nw0KLQCZ%2FBZGtN1kscofbr%2F8rmel9eEuLAFBahiyGHwR02EJ7Cf8qGdZoHsjYzaR5PedfF13koGt4ptiDgg3XkrIrdXGUOHl9WRD3bb3nepb%2BkNauu9X8mG6O%2FgCYZ8ZCZJiAmRghrqGRGMfmToq68eu5DnvuRUayLVSlzIT75l3AWi8IphAK34R35PoW6ZsYlQiMsebbLEDu6M9YYI6mkcSu%2FE8yDATlX7xN5ooJZkQlCgrmOH0XOheN5y%2FnghjgOJBkxo7v7w%3D%3D)"}).then(b=>{b.isConfirmed&&this.$router.push("/")}),this.$refs.form.resetForm(),this.data.message="",this.getCarts()}).catch(t=>{x.fire({title:t.response.data.message,icon:"error",confirmButtonText:"OK"})})}},computed:{...P(V,["cart"])},mounted(){}},i=o=>(F("data-v-c491506d"),o=o(),R(),o),U={class:"container"},z={class:"my-5 row justify-content-center"},G={class:"mb-3"},q=i(()=>e("label",{for:"email",class:"form-label"},"Email",-1)),M={class:"mb-3"},j=i(()=>e("label",{for:"name",class:"form-label"},"收件人姓名",-1)),H={class:"mb-3"},Z=i(()=>e("label",{for:"tel",class:"form-label"},"收件人電話",-1)),K={class:"mb-3"},X=i(()=>e("label",{for:"address",class:"form-label"},"收件人地址",-1)),Y={class:"mb-3"},J=i(()=>e("label",{for:"message",class:"form-label"},"留言",-1)),Q={class:"text-end"},W=["disabled"],$={key:0,class:"spinner-border spinner-border-sm",role:"status"},ee={class:"col-md-5 RWD-padding"},se={class:"border border-primary p-4 mb-4 bg-primary bg-opacity-50 shadow"},te=i(()=>e("h4",{class:"mb-4"},"Order Detail",-1)),oe=["src","alt"],ae={class:"w-100 ms-2"},le={class:"d-flex justify-content-between fw-bold"},re={class:"mb-0"},de={class:"mb-0"},ie={class:"d-flex justify-content-between"},ne={key:0,class:"text-muted mb-0"},ce={key:1},me={class:"mb-0"},ue={class:"table mt-4 border-top border-bottom text-muted"},pe=i(()=>e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"Subtotal",-1)),_e={key:0,class:"text-end border-0 px-0 pt-4"},be={key:1,class:"text-end border-0 px-0 pt-4"},he=i(()=>e("tr",null,[e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"Payment"),e("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1)),fe={class:"d-flex justify-content-between mt-4"},ge=i(()=>e("p",{class:"mb-0 h4 fw-bold"},"Total",-1)),ve={class:"mb-0 h4 fw-bold"};function ye(o,t,b,xe,a,k){const m=p("VueField"),u=p("ErrorMessage"),w=p("RouterLink"),E=p("VueForm");return r(),n("div",U,[e("div",z,[d(E,{ref:"form",class:"col-md-6 p-4 bg-primary bg-opacity-50 border border-primary",onSubmit:k.onSubmit},{default:g(({errors:s})=>{var h,f;return[e("div",G,[q,d(m,{id:"email",name:"Email",type:"email",class:_(["form-control",{"is-invalid":s.Email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:a.data.user.email,"onUpdate:modelValue":t[0]||(t[0]=l=>a.data.user.email=l)},null,8,["class","modelValue"]),d(u,{name:"Email",class:"invalid-feedback"})]),e("div",M,[j,d(m,{id:"name",name:"姓名",type:"text",class:_(["form-control",{"is-invalid":s.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:a.data.user.name,"onUpdate:modelValue":t[1]||(t[1]=l=>a.data.user.name=l)},null,8,["class","modelValue"]),d(u,{name:"姓名",class:"invalid-feedback"})]),e("div",H,[Z,d(m,{id:"tel",name:"電話",type:"text",class:_(["form-control",{"is-invalid":s.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:a.data.user.tel,"onUpdate:modelValue":t[2]||(t[2]=l=>a.data.user.tel=l)},null,8,["class","modelValue"]),d(u,{name:"電話",class:"invalid-feedback"})]),e("div",K,[X,d(m,{id:"address",name:"地址",type:"text",class:_(["form-control",{"is-invalid":s.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:a.data.user.address,"onUpdate:modelValue":t[3]||(t[3]=l=>a.data.user.address=l)},null,8,["class","modelValue"]),d(u,{name:"地址",class:"invalid-feedback"})]),e("div",Y,[J,S(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=l=>a.data.message=l)},null,512),[[C,a.data.message]])]),e("div",Q,[(f=(h=o.cart)==null?void 0:h.carts)!=null&&f.length?(r(),D(w,{key:0,to:"/cart",class:"btn btn-outline-primary float-start"},{default:g(()=>[v("回上一步")]),_:1})):y("",!0),e("button",{type:"submit",class:"btn btn-danger",disabled:a.submitLoading},[a.submitLoading?(r(),n("span",$)):y("",!0),v(" 送出訂單 ")],8,W)])]}),_:1},8,["onSubmit"]),e("div",ee,[e("div",se,[te,(r(!0),n(A,null,L(o.cart.carts,s=>(r(),n("div",{key:s.id,class:"d-flex mt-2"},[e("img",{src:s.product.imageUrl,alt:s.product.title,class:"",style:{width:"160px",height:"50px","object-fit":"cover"}},null,8,oe),e("div",ae,[e("div",le,[e("p",re,c(s.product.title),1),e("p",de,c(s.qty),1)]),e("div",ie,[s.total!==s.final_total?(r(),n("del",ne,[e("small",null,"NT$"+c(s.total),1)])):(r(),n("small",ce,"NT$"+c(s.product.price),1)),e("p",me,"NT$"+c(s.final_total),1)])])]))),128)),e("table",ue,[e("tbody",null,[e("tr",null,[pe,o.cart.total==o.cart.final_total?(r(),n("td",_e,[e("span",null," NT$"+c(o.cart.total),1)])):(r(),n("td",be,[e("del",null," NT$"+c(o.cart.total),1)]))]),he])]),e("div",fe,[ge,e("p",ve,"NT$"+c(o.cart.final_total),1)])])])])])}const Te=T(O,[["render",ye],["__scopeId","data-v-c491506d"]]);export{Te as default};
